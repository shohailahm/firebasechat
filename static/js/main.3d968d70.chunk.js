(this.webpackJsonpfirebasechat=this.webpackJsonpfirebasechat||[]).push([[0],{54:function(e,t,a){e.exports=a(79)},59:function(e,t,a){},75:function(e,t,a){},79:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(8),s=a.n(o),c=(a(59),a(36)),i=a(41),l=a(42),u=a(48),h=a(43),m=a(49),p=a(124),d=a(120),v=a(34),f=a(122),b=a(123),g=a(18),y=a.n(g),w=(a(75),a(114)),k=a(125),E=a(117),S=a(118),x=["1","2","3","4","5"],C=Object(w.a)((function(e){return{root:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh","& > *":{margin:e.spacing(1)}},orange:{color:e.palette.getContrastText(E.a[500]),backgroundColor:E.a[500]},purple:{color:e.palette.getContrastText(S.a[500]),backgroundColor:S.a[500],"&:hover":{backgroundColor:"gray"}}}}));var A=function(e){var t=e.onselect,a=C();return r.a.createElement("div",{className:a.root},"Select An Avtar",x.map((function(e,n){return function(e,t,a,n){return r.a.createElement(k.a,{className:e.purple,key:a,onClick:function(){return n(a)}},t)}(a,e,n,t)})))},j=a(121),L={avatar1:!1,avatar2:!1,avatar3:!1,avatar4:!1,avatar5:!1},M=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).onSubmit=function(e){13===e.charCode&&""!==a.state.text.trim()&&(a.writeMessageToDB(a.state.text),a.setState({text:""}))},a.checkAvatar=function(){y.a.database().ref("chatroom/avatar/").on("value",(function(e){var t=e.val();for(var n in t)if(!0===t[n])return a.setState({published:!0,type:n,loading:!1});return a.setState({published:!1,type:null,loading:!1})}))},a.writeMessageToDB=function(e){y.a.database().ref("chatroom/").child("messages").push({text:"".concat(a.state.type," : ").concat(e)})},a.getMessages=function(){y.a.database().ref("chatroom/messages/").limitToLast(500).on("value",(function(e){var t=[];e.forEach((function(e){var a=e.val();t.push({id:e.key,text:a.text})})),a.setState({messages:t}),a.bottomSpan.scrollIntoView({behavior:"smooth"})}))},a.renderMessages=function(){return a.state.messages.map((function(e){return r.a.createElement(p.a,null,r.a.createElement(d.a,{style:{wordBreak:"break-word"},primary:e.text}))}))},a.selectAvatar=function(e){var t=Object(c.a)({},L);t["avatar".concat(e+1)]=!0,y.a.database().ref("chatroom").child("avatar").set(t),a.setState({publisher:!0,published:!0})},a.leave=function(){var e=Object(c.a)({},L);y.a.database().ref("chatroom").child("avatar").set(e)},a.handleLeavePage=function(e){a.leave();return e.returnValue="Some message","Some message"},a.state={text:"",messages:[],publisher:!1,published:!0,type:null,loading:!0},y.a.initializeApp({apiKey:"AIzaSyA-kz-UcFun8iP7_DChv2mH9N3tGR-4mf8",authDomain:"chatapp-89dbc.firebaseapp.com",databaseURL:"https://chatapp-89dbc.firebaseio.com",projectId:"chatapp-89dbc",storageBucket:"chatapp-89dbc.appspot.com",messagingSenderId:"1043787722111",appId:"1:1043787722111:web:3d75a3723d99e0dc0f7e4a"}),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("beforeunload",this.handleLeavePage),this.checkAvatar(),this.getMessages()}},{key:"componentWillUnmount",value:function(){this.leave(),window.removeEventListener("beforeunload",this.handleLeavePage)}},{key:"render",value:function(){var e=this;return this.state.loading?r.a.createElement("div",{className:"App",style:{marginTop:16}},r.a.createElement(j.a,{color:"secondary"})):this.state.published?r.a.createElement("div",{className:"App"},r.a.createElement(v.a,{variant:"h2",component:"h3"},"Chatroom"),r.a.createElement(f.a,null,this.renderMessages()),r.a.createElement(b.a,{autoFocus:!0,multiline:!0,rowsMax:3,placeholder:"Type something..",onChange:function(t){return e.setState({text:t.target.value})},value:this.state.text,onKeyPress:this.state.publisher?this.onSubmit:null,style:{width:"90vw",overflow:"hidden"}}),this.state.publisher&&r.a.createElement("span",{onClick:this.leave},"Leave"),r.a.createElement("span",{ref:function(t){return e.bottomSpan=t}})):r.a.createElement(r.a.Fragment,null,r.a.createElement(A,{onselect:this.selectAvatar})," ",r.a.createElement("span",{ref:function(t){return e.bottomSpan=t}}))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[54,1,2]]]);
//# sourceMappingURL=main.3d968d70.chunk.js.map